# Weekly Progress — 2025-10-17

## Highlights
- Hardened GOV-000 governance tooling with admin guard telemetry, cache purge protection, and reversible migrations for feature flags/RBAC.
- Delivered SEC-001 RBAC hardening: refreshed Supabase `roles`/`profile_roles`, migrated legacy slugs, and rewrote taxonomy/community policies for the new member → admin ladder.
- Gated admin role management behind the new `rbac_hardening_v1` flag, surfaced highest-role badges in the console sidebar, and mapped legacy editor/author selections.
- Instrumented `authz_denied_count` counter plus console telemetry for admin/community APIs; added Vitest coverage for role slug normalization and metrics emission.
- Patched feature flag enum to include `rbac_hardening_v1` for parity with release plan defaults and backfilled unit coverage to guard regressions.

## Feature Flags
- `rbac_hardening_v1`: OFF (internal testing only).
- `spaces_v1`: OFF (depends on SEC-001 + UX-010).
- `content_templates_v1`: OFF.
- `search_unified_v1`: OFF.
- `reputation_v1`: OFF.
- `moderation_automation_v1`: OFF.
- `donations_v1`: OFF.
- `payouts_v1`: OFF.
- `events_v1`: OFF.
- `messaging_v1`: OFF.
- `notifications_v1`: OFF.

## Metrics Snapshot
- `authz_denied_count`: 0 during admin API smoke tests post-migration (baseline logging now available).
- Added `context`/`reason` tags to `authz_denied_count` to differentiate governance vs. RBAC denials in dashboards.
- `flag_evaluation_latency_ms` remains stable at ~4ms p95 (no regression after RBAC changes share the metrics adapter).

## Risks / Follow-ups
- Supabase-backed RBAC policy tests require dedicated credentials; tracked via `tests/security/rbac-policies.test.ts` until automated environment provisioned.
- Need to wire Playwright admin journey + axe scan once SEC-001 flag graduates to pilot.
- Coordinate with SEC-001 follow-ups for broader role analytics and audit dashboard panels.

## 2025-10-24 Addendum
- **Shipped tickets:** Continued SEC-001 hardening (audit log schema + unified admin guard), backlog planning updates.
- **Flags enabled:** None (all Phase-1 flags remain OFF; guard work validated locally only).
- **KPI deltas:** No production delta; verified `authz_denied_count` increments via unit tests for new guard path.
- **New risks/assumptions:** Documented ownership assumptions for `nav_ia_v1`/`observability_v1`; audit log schema awaiting broader RLS rollout.
- **Next targets:** Extend guard adoption to remaining admin APIs, expand RLS policies for spaces/posts/comments, and begin UX-010 token groundwork once SEC-001 passes.

## 2025-10-31 Addendum
- **Shipped tickets:** SEC-001 vertical slice expanded with Supabase migration `0020_sec_001_rls_policies` (spaces schema, helper functions, deny-by-default policies), admin user management audit logs, and publish latency instrumentation. UX-010 groundwork began by updating backlog subtasks for tokens/nav. OBS-100 seeded with structured logging + tracing helpers.
- **Flags enabled:** `rbac_hardening_v1` — OFF (validated via unit/integration harness only); `nav_ia_v1` and `observability_v1` remain OFF pending UI work.
- **KPI deltas:** Captured baseline `content_publish_latency_ms` (local publish flow ~420ms) and `authz_denied_count` tags for Operations dashboard `dash_ops_rbac_v1` dry run.
- **New risks/assumptions:** Assumed initial `space_membership_status` enum (`active|invited|suspended`) and placeholder dashboard identifiers (`dash_exec_kpi_v1`, `dash_ops_rbac_v1`) pending analytics team confirmation.
- **Next targets:** Ship UX-010 tokenized nav with skip link + axe automation, wire Playwright journeys for OBS-100, and finalize RLS integration tests once Supabase staging creds are provisioned.
